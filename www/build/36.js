<<<<<<< Updated upstream
webpackJsonp([36],{2075:function(e,t,a){"use strict";function View_CoreTagIndexAreaPage_1(e){return n._57(0,[(e()(),n._31(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),n._55(-1,null,["\n            "])),(e()(),n._31(2,0,null,null,2,"core-dynamic-component",[],null,null,null,N.b,N.a)),n._30(3,901120,null,0,D.a,[R.b,n.o,n.F,[2,w.a],n.j,n.t,o.a],{component:[0,"component"],data:[1,"data"]},null),n._48(4,{items:0}),(e()(),n._55(-1,null,["\n        "]))],function(e,t){var a=t.component;e(t,3,0,a.areaComponent,e(t,4,0,a.items))},null)}function View_CoreTagIndexAreaPage_0(e){return n._57(0,[(e()(),n._31(0,0,null,null,15,"ion-header",[],null,null,null,null,null)),n._30(1,16384,null,0,V.a,[O.a,n.t,n.V,[2,E.a]],null,null),(e()(),n._55(-1,null,["\n    "])),(e()(),n._31(3,0,null,null,11,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,K.b,K.a)),n._30(4,49152,null,0,L.a,[U.a,[2,E.a],[2,w.a],O.a,n.t,n.V],null,null),n._30(5,212992,null,0,k.a,[L.a,F.a,G.a,H.b],null,null),(e()(),n._55(-1,3,["\n        "])),(e()(),n._31(7,0,null,3,6,"ion-title",[],null,null,null,J.b,J.a)),n._30(8,49152,null,0,$.a,[O.a,n.t,n.V,[2,q.a],[2,L.a]],null,null),(e()(),n._55(9,0,["",""])),n._47(131072,z.a,[G.a,n.j]),n._48(11,{tagarea:0,tag:1}),n._48(12,{$a:0}),n._47(131072,z.a,[G.a,n.j]),(e()(),n._55(-1,3,["\n    "])),(e()(),n._55(-1,null,["\n"])),(e()(),n._55(-1,null,["\n"])),(e()(),n._31(17,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,B.b,B.a)),n._30(18,4374528,null,0,Q.a,[O.a,F.a,S.a,n.t,n.V,U.a,W.a,n.M,[2,E.a],[2,w.a]],null,null),(e()(),n._55(-1,1,["\n    "])),(e()(),n._31(20,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,t,a){var n=!0;if("ionRefresh"===t){n=!1!==e.component.refreshData(a)&&n}return n},null,null)),n._30(21,212992,null,0,X.a,[F.a,Q.a,n.M,Y.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),n._55(-1,null,["\n        "])),(e()(),n._31(23,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Z.b,Z.a)),n._30(24,114688,null,0,ee.a,[X.a,O.a],{pullingText:[0,"pullingText"]},null),n._47(131072,z.a,[G.a,n.j]),(e()(),n._55(-1,null,["\n    "])),(e()(),n._55(-1,1,["\n    "])),(e()(),n._31(28,0,null,1,8,"core-loading",[],null,null,null,te.b,te.a)),n._30(29,638976,null,0,ae.a,[G.a,n.t,H.b,ne.b],{hideUntil:[0,"hideUntil"]},null),(e()(),n._55(-1,0,["\n        "])),(e()(),n._26(16777216,null,0,1,null,View_CoreTagIndexAreaPage_1)),n._30(32,16384,null,0,le.k,[n._11,n._6],{ngIf:[0,"ngIf"]},null),(e()(),n._55(-1,0,["\n        "])),(e()(),n._31(34,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,t,a){var n=!0;if("action"===t){n=!1!==e.component.loadMore(a)&&n}return n},re.b,re.a)),n._30(35,573440,null,0,oe.a,[[2,Q.a],o.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),n._55(-1,0,["\n    "])),(e()(),n._55(-1,1,["\n"])),(e()(),n._55(-1,null,["\n"]))],function(e,t){var a=t.component;e(t,5,0);e(t,21,0,a.loaded);e(t,24,0,n._34(1,"",n._56(t,24,0,n._44(t,25).transform("core.pulltorefresh")),""));e(t,29,0,a.loaded);e(t,32,0,a.loaded);e(t,35,0,a.canLoadMore,a.loadMoreError)},function(e,t){var a=t.component;e(t,3,0,n._44(t,4)._hidden,n._44(t,4)._sbPadding);e(t,9,0,n._56(t,9,0,n._44(t,13).transform("core.tag.itemstaggedwith",e(t,12,0,e(t,11,0,n._56(t,9,0,n._44(t,10).transform(a.areaNameKey)),a.tagName)))));e(t,17,0,n._44(t,18).statusbarPadding,n._44(t,18)._hasRefresher);e(t,20,0,"inactive"!==n._44(t,21).state,n._44(t,21)._top);e(t,23,0,n._44(t,24).r.state)})}Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(5),r=a(3),o=a(4),i=a(165),u=a(207),c=this&&this.__decorate||function(e,t,a,n){var l,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(l=e[i])&&(o=(r<3?l(o):r>3?l(t,a,o):l(t,a))||o);return r>3&&o&&Object.defineProperty(t,a,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function CoreTagIndexAreaPage(e,t,a,n,l,r){this.injector=t,this.translate=a,this.tagProvider=n,this.domUtils=l,this.tagAreaDelegate=r,this.loaded=!1,this.items=[],this.nextPage=0,this.canLoadMore=!1,this.loadMoreError=!1,this.tagId=e.get("tagId"),this.tagName=e.get("tagName"),this.collectionId=e.get("collectionId"),this.areaId=e.get("areaId"),this.fromContextId=e.get("fromContextId"),this.contextId=e.get("contextId"),this.recursive=e.get("recursive"),this.areaNameKey=e.get("areaNameKey"),this.componentName=e.get("componentName"),this.itemType=e.get("itemType"),this.items=e.get("items")||[],this.nextPage=e.get("nextPage")||0,this.canLoadMore=!!e.get("canLoadMore")}return CoreTagIndexAreaPage.prototype.ionViewDidLoad=function(){var e=this;(this.componentName&&this.itemType&&this.items.length&&0!=this.nextPage?Promise.resolve():this.fetchData(!0)).then(function(){return e.tagAreaDelegate.getComponent(e.componentName,e.itemType,e.injector).then(function(t){e.areaComponent=t})}).finally(function(){e.loaded=!0})},CoreTagIndexAreaPage.prototype.fetchData=function(e){var t=this;void 0===e&&(e=!1),this.loadMoreError=!1;var a=e?0:this.nextPage;return this.tagProvider.getTagIndexPerArea(this.tagId,this.tagName,this.collectionId,this.areaId,this.fromContextId,this.contextId,this.recursive,a).then(function(e){var n=e[0];return t.tagAreaDelegate.parseContent(n.component,n.itemtype,n.content).then(function(e){if(!e||!e.length)return Promise.reject(t.translate.instant("core.tag.errorareanotsupported"));0==a?t.items=e:(l=t.items).push.apply(l,e),t.componentName=n.component,t.itemType=n.itemtype,t.areaNameKey=t.tagAreaDelegate.getDisplayNameKey(n.component,n.itemtype),t.canLoadMore=!!n.nextpageurl,t.nextPage=a+1;var l})}).catch(function(e){t.loadMoreError=!0,t.domUtils.showErrorModalDefault(e,"Error loading tag index")})},CoreTagIndexAreaPage.prototype.loadMore=function(e){return this.fetchData().finally(function(){e()})},CoreTagIndexAreaPage.prototype.refreshData=function(e){var t=this;this.tagProvider.invalidateTagIndexPerArea(this.tagId,this.tagName,this.collectionId,this.areaId,this.fromContextId,this.contextId,this.recursive).finally(function(){t.fetchData(!0).finally(function(){e.complete()})})},CoreTagIndexAreaPage=c([Object(n.m)({selector:"page-core-tag-index-area",templateUrl:"index-area.html"}),s("design:paramtypes",[l.t,n.C,r.c,i.a,o.a,u.a])],CoreTagIndexAreaPage)}(),_=a(26),g=a(32),h=this&&this.__decorate||function(e,t,a,n){var l,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,n);else for(var i=e.length-1;i>=0;i--)(l=e[i])&&(o=(r<3?l(o):r>3?l(t,a,o):l(t,a))||o);return r>3&&o&&Object.defineProperty(t,a,o),o},f=function(){function CoreTagIndexAreaPageModule(){}return CoreTagIndexAreaPageModule=h([Object(n.I)({declarations:[d],imports:[_.a,g.a,l.l.forChild(d),r.b.forChild()]})],CoreTagIndexAreaPageModule)}(),p=a(1527),m=a(1528),b=a(1529),x=a(1530),I=a(1531),y=a(1532),P=a(1533),v=a(1534),C=a(1535),T=a(1536),A=a(1537),M=a(1538),j=a(1539),N=a(724),D=a(201),R=a(6),w=a(20),V=a(373),O=a(8),E=a(40),K=a(722),L=a(214),U=a(35),k=a(472),F=a(15),G=a(18),H=a(9),J=a(723),$=a(317),q=a(250),z=a(25),B=a(183),Q=a(29),S=a(34),W=a(109),X=a(161),Y=a(45),Z=a(215),ee=a(175),te=a(56),ae=a(53),ne=a(2),le=a(7),re=a(375),oe=a(275),ie=a(70),ue=n._29({encapsulation:2,styles:[],data:{}}),ce=n._27("page-core-tag-index-area",d,function View_CoreTagIndexAreaPage_Host_0(e){return n._57(0,[(e()(),n._31(0,0,null,null,1,"page-core-tag-index-area",[],null,null,null,View_CoreTagIndexAreaPage_0,ue)),n._30(1,49152,null,0,d,[ie.a,n.C,G.a,i.a,o.a,u.a],null,null)],null,null)},{},{},[]),se=a(23),de=a(369),_e=a(370),ge=a(372),he=a(371),fe=a(471),pe=a(721),me=a(108),be=a(272);a.d(t,"CoreTagIndexAreaPageModuleNgFactory",function(){return xe});var xe=n._28(f,[],function(e){return n._40([n._41(512,n.o,n._21,[[8,[p.a,m.a,b.a,x.a,I.a,y.a,P.a,v.a,C.a,T.a,A.a,M.a,j.a,ce]],[3,n.o],n.K]),n._41(4608,le.m,le.l,[n.G,[2,le.w]]),n._41(4608,se.x,se.x,[]),n._41(4608,se.d,se.d,[]),n._41(4608,de.b,de.a,[]),n._41(4608,_e.a,_e.b,[]),n._41(4608,ge.b,ge.a,[]),n._41(4608,he.b,he.a,[]),n._41(4608,G.a,G.a,[fe.a,de.b,_e.a,ge.b,he.b,G.b,G.c]),n._41(512,le.b,le.b,[]),n._41(512,se.v,se.v,[]),n._41(512,se.i,se.i,[]),n._41(512,se.s,se.s,[]),n._41(512,pe.a,pe.a,[]),n._41(512,r.b,r.b,[]),n._41(512,g.a,g.a,[]),n._41(512,me.a,me.a,[]),n._41(512,_.a,_.a,[]),n._41(512,pe.b,pe.b,[]),n._41(512,f,f,[]),n._41(256,G.c,void 0,[]),n._41(256,G.b,void 0,[]),n._41(256,be.a,d,[])])})}});
=======
webpackJsonp([36],{

/***/ 2043:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoreLoginSitePolicyPageModule", function() { return CoreLoginSitePolicyPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__site_policy__ = __webpack_require__(2195);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ngx_translate_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_components_module__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__directives_directives_module__ = __webpack_require__(14);
// (C) Copyright 2015 Moodle Pty Ltd.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var CoreLoginSitePolicyPageModule = /** @class */ (function () {
    function CoreLoginSitePolicyPageModule() {
    }
    CoreLoginSitePolicyPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_2__site_policy__["a" /* CoreLoginSitePolicyPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_4__components_components_module__["a" /* CoreComponentsModule */],
                __WEBPACK_IMPORTED_MODULE_5__directives_directives_module__["a" /* CoreDirectivesModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__site_policy__["a" /* CoreLoginSitePolicyPage */]),
                __WEBPACK_IMPORTED_MODULE_3__ngx_translate_core__["b" /* TranslateModule */].forChild()
            ]
        })
    ], CoreLoginSitePolicyPageModule);
    return CoreLoginSitePolicyPageModule;
}());

//# sourceMappingURL=site-policy.module.js.map

/***/ }),

/***/ 2195:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CoreLoginSitePolicyPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_sites__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_utils_dom__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_utils_mimetype__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_utils_utils__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_helper__ = __webpack_require__(87);
// (C) Copyright 2015 Moodle Pty Ltd.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Page to accept a site policy.
 */
var CoreLoginSitePolicyPage = /** @class */ (function () {
    function CoreLoginSitePolicyPage(navCtrl, navParams, loginHelper, domUtils, sitesProvider, utils, mimeUtils) {
        this.navCtrl = navCtrl;
        this.loginHelper = loginHelper;
        this.domUtils = domUtils;
        this.sitesProvider = sitesProvider;
        this.utils = utils;
        this.mimeUtils = mimeUtils;
        this.siteId = navParams.get('siteId');
    }
    /**
     * View laoded.
     */
    CoreLoginSitePolicyPage.prototype.ionViewDidLoad = function () {
        this.currentSite = this.sitesProvider.getCurrentSite();
        if (!this.currentSite) {
            // Not logged in, stop.
            this.cancel();
            return;
        }
        var currentSiteId = this.currentSite.id;
        this.siteId = this.siteId || currentSiteId;
        if (this.siteId != currentSiteId || !this.currentSite.wsAvailable('core_user_agree_site_policy')) {
            // Not current site or WS not available, stop.
            this.cancel();
            return;
        }
        this.fetchSitePolicy();
    };
    /**
     * Fetch the site policy URL.
     *
     * @return Promise resolved when done.
     */
    CoreLoginSitePolicyPage.prototype.fetchSitePolicy = function () {
        var _this = this;
        return this.loginHelper.getSitePolicy(this.siteId).then(function (sitePolicy) {
            _this.sitePolicy = sitePolicy;
            // Try to get the mime type.
            return _this.utils.getMimeTypeFromUrl(sitePolicy).then(function (mimeType) {
                var extension = _this.mimeUtils.getExtension(mimeType, sitePolicy);
                _this.showInline = extension == 'html' || extension == 'htm';
            }).catch(function () {
                // Unable to get mime type, assume it's not supported.
                _this.showInline = false;
            }).finally(function () {
                _this.policyLoaded = true;
            });
        }).catch(function (error) {
            _this.domUtils.showErrorModalDefault(error, 'Error getting site policy.');
            _this.cancel();
        });
    };
    /**
     * Cancel.
     */
    CoreLoginSitePolicyPage.prototype.cancel = function () {
        var _this = this;
        this.sitesProvider.logout().catch(function () {
            // Ignore errors, shouldn't happen.
        }).then(function () {
            _this.navCtrl.setRoot('CoreLoginSitesPage');
        });
    };
    /**
     * Accept the site policy.
     */
    CoreLoginSitePolicyPage.prototype.accept = function () {
        var _this = this;
        var modal = this.domUtils.showModalLoading('core.sending', true);
        this.loginHelper.acceptSitePolicy(this.siteId).then(function () {
            // Success accepting, go to site initial page.
            // Invalidate cache since some WS don't return error if site policy is not accepted.
            return _this.currentSite.invalidateWsCache().catch(function () {
                // Ignore errors.
            }).then(function () {
                return _this.loginHelper.goToSiteInitialPage();
            });
        }).catch(function (error) {
            _this.domUtils.showErrorModalDefault(error, 'Error accepting site policy.');
        }).finally(function () {
            modal.dismiss();
        });
    };
    CoreLoginSitePolicyPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-core-login-site-policy',template:/*ion-inline-start:"/home/ravijain/Documents/GitHub/TriangleLearn-Ravi/src/core/login/pages/site-policy/site-policy.html"*/'<ion-header>\n    <ion-navbar core-back-button>\n        <ion-title>{{ \'core.login.policyagreement\' | translate }}</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <core-loading [hideUntil]="policyLoaded">\n        <ion-list>\n            <ion-item text-wrap>\n                {{ \'core.login.policyagree\' | translate }}\n            </ion-item>\n            <ion-item text-wrap>\n                <p><a [href]="sitePolicy" core-link [capture]="false">{{ \'core.login.policyagreementclick\' | translate }}</a></p>\n            </ion-item>\n            <ion-card *ngIf="showInline">\n                <core-iframe [src]="sitePolicy"></core-iframe>\n            </ion-card>\n            <ion-item text-wrap padding>\n                <button ion-button block color="primary" (click)="accept()">{{ \'core.login.policyaccept\' | translate }}</button>\n                <button ion-button block (click)="cancel()">{{ \'core.login.cancel\' | translate }}</button>\n            </ion-item>\n        </ion-list>\n    </core-loading>\n</ion-content>\n'/*ion-inline-end:"/home/ravijain/Documents/GitHub/TriangleLearn-Ravi/src/core/login/pages/site-policy/site-policy.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* NavParams */], __WEBPACK_IMPORTED_MODULE_6__providers_helper__["a" /* CoreLoginHelperProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_utils_dom__["a" /* CoreDomUtilsProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_sites__["a" /* CoreSitesProvider */], __WEBPACK_IMPORTED_MODULE_5__providers_utils_utils__["b" /* CoreUtilsProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_utils_mimetype__["a" /* CoreMimetypeUtilsProvider */]])
    ], CoreLoginSitePolicyPage);
    return CoreLoginSitePolicyPage;
}());

//# sourceMappingURL=site-policy.js.map

/***/ })

});
//# sourceMappingURL=36.js.map
>>>>>>> Stashed changes
