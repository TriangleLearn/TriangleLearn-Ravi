<<<<<<< Updated upstream
webpackJsonp([39],{2071:function(l,e,n){"use strict";function View_CoreSitePickerComponent_1(l){return t._57(0,[(l()(),t._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),t._30(1,16384,[[4,4]],0,H.a,[t.t],{value:[0,"value"]},null),(l()(),t._55(2,null,["",""]))],function(l,e){l(e,1,0,e.context.$implicit.id)},function(l,e){l(e,2,0,e.context.$implicit.fullNameAndSiteName)})}function View_CoreSitePickerComponent_0(l){return t._57(0,[(l()(),t._31(0,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,N.b,N.a)),t._30(1,1097728,null,3,T.a,[q.a,M.a,t.t,t.V,[2,G.a]],null,null),t._52(335544320,1,{contentLabel:0}),t._52(603979776,2,{_buttons:1}),t._52(603979776,3,{_icons:1}),t._30(5,16384,null,0,J.a,[],null,null),(l()(),t._55(-1,2,["\n    "])),(l()(),t._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),t._30(8,16384,[[1,4]],0,K.a,[M.a,t.t,t.V,[8,null],[8,null],[8,null],[8,null]],null,null),(l()(),t._55(9,null,["",""])),t._47(131072,U.a,[E.a,t.j]),(l()(),t._55(-1,2,["\n    "])),(l()(),t._31(12,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(l,e,n){var i=!0,a=l.component;if("click"===e){i=!1!==t._44(l,13)._click(n)&&i}if("keyup.space"===e){i=!1!==t._44(l,13)._keyup()&&i}if("ngModelChange"===e){i=!1!==(a.selectedSite=n)&&i}if("ngModelChange"===e){i=!1!==a.siteSelected.emit(a.selectedSite)&&i}return i},z.b,z.a)),t._30(13,1228800,null,1,B.a,[Q.a,q.a,M.a,t.t,t.V,[2,T.a],W.a],{interface:[0,"interface"]},null),t._52(603979776,4,{options:1}),t._50(1024,null,X.l,function(l){return[l]},[B.a]),t._30(16,671744,null,0,X.q,[[8,null],[8,null],[8,null],[2,X.l]],{model:[0,"model"]},{update:"ngModelChange"}),t._50(2048,null,X.m,null,[X.q]),t._30(18,16384,null,0,X.n,[X.m],null,null),(l()(),t._55(-1,null,["\n        "])),(l()(),t._26(16777216,null,null,1,null,View_CoreSitePickerComponent_1)),t._30(21,802816,null,0,Y.j,[t._11,t._6,t.E],{ngForOf:[0,"ngForOf"]},null),(l()(),t._55(-1,null,["\n    "])),(l()(),t._55(-1,2,["\n"])),(l()(),t._55(-1,null,["\n"]))],function(l,e){var n=e.component;l(e,13,0,"action-sheet");l(e,16,0,n.selectedSite);l(e,21,0,n.sites)},function(l,e){l(e,9,0,t._56(e,9,0,t._44(e,10).transform("core.site")));l(e,12,0,t._44(e,13)._disabled,t._44(e,18).ngClassUntouched,t._44(e,18).ngClassTouched,t._44(e,18).ngClassPristine,t._44(e,18).ngClassDirty,t._44(e,18).ngClassValid,t._44(e,18).ngClassInvalid,t._44(e,18).ngClassPending)})}function View_CoreSharedFilesListPage_1(l){return t._57(0,[(l()(),t._31(0,0,null,null,11,"ion-buttons",[["end",""]],null,null,null,null,null)),t._30(1,16384,null,1,R.a,[M.a,t.t,t.V,[2,j.a],[2,O.a]],null,null),t._52(603979776,1,{_buttons:1}),(l()(),t._55(-1,null,["\n            "])),(l()(),t._31(4,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,e,n){var t=!0;if("click"===e){t=!1!==l.component.closeModal()&&t}return t},D.b,D.a)),t._30(5,1097728,[[1,4]],0,$.a,[[8,""],M.a,t.t,t.V],null,null),t._47(131072,U.a,[E.a,t.j]),(l()(),t._55(-1,0,["\n                "])),(l()(),t._31(8,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._30(9,147456,null,0,A.a,[M.a,t.t,t.V],{name:[0,"name"]},null),(l()(),t._55(-1,0,["\n            "])),(l()(),t._55(-1,null,["\n        "]))],function(l,e){l(e,9,0,"close")},function(l,e){l(e,4,0,t._56(e,4,0,t._44(e,6).transform("core.close")));l(e,8,0,t._44(e,9)._hidden)})}function View_CoreSharedFilesListPage_2(l){return t._57(0,[(l()(),t._31(0,0,null,null,1,"core-site-picker",[],[[8,"hidden",0]],[[null,"siteSelected"]],function(l,e,n){var t=!0;if("siteSelected"===e){t=!1!==l.component.changeSite(n)&&t}return t},View_CoreSitePickerComponent_0,el)),t._30(1,114688,null,0,Z.a,[E.a,s.a,ll.a],{initialSite:[0,"initialSite"]},{siteSelected:"siteSelected"})],function(l,e){l(e,1,0,e.component.siteId)},function(l,e){l(e,0,0,!e.component.filesLoaded)})}function View_CoreSharedFilesListPage_5(l){return t._57(0,[(l()(),t._31(0,0,null,null,1,"core-local-file",[],null,[[null,"onClick"],[null,"onDelete"],[null,"onRename"]],function(l,e,n){var t=!0,i=l.component;if("onClick"===e){t=!1!==i.filePicked(l.parent.context.$implicit)&&t}if("onDelete"===e){t=!1!==i.fileDeleted(l.parent.context.index)&&t}if("onRename"===e){t=!1!==i.fileRenamed(l.parent.context.index,n)&&t}return t},nl.b,nl.a)),t._30(1,114688,null,0,tl.a,[il.a,al.b,r.b,o.b,ul.a,ol.a,s.a,u.b],{file:[0,"file"],manage:[1,"manage"],overrideClick:[2,"overrideClick"]},{onDelete:"onDelete",onRename:"onRename",onClick:"onClick"})],function(l,e){var n=e.component;l(e,1,0,e.parent.context.$implicit,n.manage,n.pick)},null)}function View_CoreSharedFilesListPage_6(l){return t._57(0,[(l()(),t._31(0,0,null,null,12,"a",[["class","item-media item item-block"],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(l,e,n){var t=!0;if("click"===e){t=!1!==l.component.openFolder(l.parent.context.$implicit)&&t}return t},N.b,N.a)),t._30(1,1097728,null,3,T.a,[q.a,M.a,t.t,t.V,[2,G.a]],null,null),t._52(335544320,2,{contentLabel:0}),t._52(603979776,3,{_buttons:1}),t._52(603979776,4,{_icons:1}),t._30(5,16384,null,0,J.a,[],null,null),(l()(),t._55(-1,2,["\n                    "])),(l()(),t._31(7,0,null,0,1,"img",[["item-start",""],["role","presentation"],["src","assets/img/files/folder-64.png"]],[[8,"alt",0]],null,null,null,null)),t._47(131072,U.a,[E.a,t.j]),(l()(),t._55(-1,2,["\n                    "])),(l()(),t._31(10,0,null,2,1,"p",[],null,null,null,null,null)),(l()(),t._55(11,null,["",""])),(l()(),t._55(-1,2,["\n                "]))],null,function(l,e){l(e,7,0,t._34(1,"",t._56(e,7,0,t._44(e,8).transform("core.folder")),""));l(e,11,0,e.parent.context.$implicit.name)})}function View_CoreSharedFilesListPage_4(l){return t._57(0,[(l()(),t._31(0,0,null,null,7,null,null,null,null,null,null,null)),(l()(),t._55(-1,null,["\n                "])),(l()(),t._26(16777216,null,null,1,null,View_CoreSharedFilesListPage_5)),t._30(3,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,null,["\n                "])),(l()(),t._26(16777216,null,null,1,null,View_CoreSharedFilesListPage_6)),t._30(6,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,null,["\n            "]))],function(l,e){l(e,3,0,e.context.$implicit.isFile);l(e,6,0,!e.context.$implicit.isFile)},null)}function View_CoreSharedFilesListPage_3(l){return t._57(0,[(l()(),t._31(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),t._30(1,16384,null,0,sl.a,[M.a,t.t,t.V,rl.a,_l.l,cl.a],null,null),(l()(),t._55(-1,null,["\n            "])),(l()(),t._26(16777216,null,null,1,null,View_CoreSharedFilesListPage_4)),t._30(4,802816,null,0,Y.j,[t._11,t._6,t.E],{ngForOf:[0,"ngForOf"]},null),(l()(),t._55(-1,null,["\n        "]))],function(l,e){l(e,4,0,e.component.files)},null)}function View_CoreSharedFilesListPage_7(l){return t._57(0,[(l()(),t._31(0,0,null,null,2,"core-empty-box",[["icon","folder"]],null,null,null,dl.b,dl.a)),t._30(1,49152,null,0,fl.a,[],{message:[0,"message"],icon:[1,"icon"]},null),t._47(131072,U.a,[E.a,t.j])],function(l,e){l(e,1,0,t._56(e,1,0,t._44(e,2).transform("core.sharedfiles.nosharedfiles")),"folder")},null)}function View_CoreSharedFilesListPage_8(l){return t._57(0,[(l()(),t._31(0,0,null,null,2,"core-empty-box",[["icon","folder"]],null,null,null,dl.b,dl.a)),t._30(1,49152,null,0,fl.a,[],{message:[0,"message"],icon:[1,"icon"]},null),t._47(131072,U.a,[E.a,t.j])],function(l,e){l(e,1,0,t._56(e,1,0,t._44(e,2).transform("core.sharedfiles.nosharedfilestoupload")),"folder")},null)}function View_CoreSharedFilesListPage_0(l){return t._57(0,[(l()(),t._31(0,0,null,null,14,"ion-header",[],null,null,null,null,null)),t._30(1,16384,null,0,hl.a,[M.a,t.t,t.V,[2,gl.a]],null,null),(l()(),t._55(-1,null,["\n    "])),(l()(),t._31(3,0,null,null,10,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,pl.b,pl.a)),t._30(4,49152,null,0,O.a,[Q.a,[2,gl.a],[2,ml.a],M.a,t.t,t.V],null,null),t._30(5,212992,null,0,bl.a,[O.a,rl.a,E.a,u.b],null,null),(l()(),t._55(-1,3,["\n        "])),(l()(),t._31(7,0,null,3,2,"ion-title",[],null,null,null,Cl.b,Cl.a)),t._30(8,49152,null,0,Pl.a,[M.a,t.t,t.V,[2,j.a],[2,O.a]],null,null),(l()(),t._55(9,0,["",""])),(l()(),t._55(-1,3,["\n\n        "])),(l()(),t._26(16777216,null,2,1,null,View_CoreSharedFilesListPage_1)),t._30(12,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,3,["\n    "])),(l()(),t._55(-1,null,["\n"])),(l()(),t._55(-1,null,["\n"])),(l()(),t._31(16,0,null,null,27,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Sl.b,Sl.a)),t._30(17,4374528,null,0,Fl.a,[M.a,rl.a,cl.a,t.t,t.V,Q.a,vl.a,t.M,[2,gl.a],[2,ml.a]],null,null),(l()(),t._55(-1,1,["\n    "])),(l()(),t._31(19,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,e,n){var t=!0;if("ionRefresh"===e){t=!1!==l.component.refreshFiles(n)&&t}return t},null,null)),t._30(20,212992,null,0,Ll.a,[rl.a,Fl.a,t.M,_l.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(l()(),t._55(-1,null,["\n        "])),(l()(),t._31(22,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,kl.b,kl.a)),t._30(23,114688,null,0,yl.a,[Ll.a,M.a],{pullingText:[0,"pullingText"]},null),t._47(131072,U.a,[E.a,t.j]),(l()(),t._55(-1,null,["\n    "])),(l()(),t._55(-1,1,["\n    "])),(l()(),t._55(-1,1,["\n    "])),(l()(),t._26(16777216,null,1,1,null,View_CoreSharedFilesListPage_2)),t._30(29,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,1,["\n    "])),(l()(),t._31(31,0,null,1,11,"core-loading",[],null,null,null,Vl.b,Vl.a)),t._30(32,638976,null,0,wl.a,[E.a,t.t,u.b,al.b],{hideUntil:[0,"hideUntil"]},null),(l()(),t._55(-1,0,["\n        "])),(l()(),t._26(16777216,null,0,1,null,View_CoreSharedFilesListPage_3)),t._30(35,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,0,["\n        "])),(l()(),t._26(16777216,null,0,1,null,View_CoreSharedFilesListPage_7)),t._30(38,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,0,["\n        "])),(l()(),t._26(16777216,null,0,1,null,View_CoreSharedFilesListPage_8)),t._30(41,16384,null,0,Y.k,[t._11,t._6],{ngIf:[0,"ngIf"]},null),(l()(),t._55(-1,0,["\n    "])),(l()(),t._55(-1,1,["\n"])),(l()(),t._55(-1,null,["\n"]))],function(l,e){var n=e.component;l(e,5,0);l(e,12,0,n.isModal);l(e,20,0,n.filesLoaded);l(e,23,0,t._34(1,"",t._56(e,23,0,t._44(e,24).transform("core.pulltorefresh")),""));l(e,29,0,n.showSitePicker);l(e,32,0,n.filesLoaded);l(e,35,0,n.files&&n.files.length>0);l(e,38,0,n.files&&!n.files.length&&n.manage);l(e,41,0,n.files&&!n.files.length&&!n.manage)},function(l,e){var n=e.component;l(e,3,0,t._44(e,4)._hidden,t._44(e,4)._sbPadding);l(e,9,0,n.title);l(e,16,0,t._44(e,17).statusbarPadding,t._44(e,17)._hasRefresher);l(e,19,0,"inactive"!==t._44(e,20).state,t._44(e,20)._top);l(e,22,0,t._44(e,23).r.state)})}Object.defineProperty(e,"__esModule",{value:!0});var t=n(0),i=n(5),a=n(3),u=n(9),o=n(54),s=n(1),r=n(11),_=n(487),c=this&&this.__decorate||function(l,e,n,t){var i,a=arguments.length,u=a<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(l,e,n,t);else for(var o=l.length-1;o>=0;o--)(i=l[o])&&(u=(a<3?i(u):a>3?i(e,n,u):i(e,n))||u);return a>3&&u&&Object.defineProperty(e,n,u),u},d=this&&this.__metadata||function(l,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,e)},f=function(){function CoreSharedFilesListPage(l,e,n,t,i,a,u,o,s){this.viewCtrl=l,this.sharedFilesProvider=n,this.sitesProvider=t,this.textUtils=i,this.translate=a,this.fileProvider=u,this.eventsProvider=o,this.navCtrl=s,this.path="",this.siteId=e.get("siteId")||this.sitesProvider.getCurrentSiteId(),this.mimetypes=e.get("mimetypes"),this.isModal=!!e.get("isModal"),this.manage=!!e.get("manage"),this.pick=!!e.get("pick"),this.path=e.get("path")||"",this.showSitePicker=!e.get("hideSitePicker")}return CoreSharedFilesListPage.prototype.ngOnInit=function(){var l=this;this.loadFiles(),this.shareObserver=this.eventsProvider.on(u.b.FILE_SHARED,function(e){e.siteId==l.siteId&&(l.filesLoaded=!1,l.loadFiles().finally(function(){l.filesLoaded=!0}))})},CoreSharedFilesListPage.prototype.loadFiles=function(){var l=this;return this.title=this.path?this.fileProvider.getFileAndDirectoryFromPath(this.path).name:this.translate.instant("core.sharedfiles.sharedfiles"),this.sharedFilesProvider.getSiteSharedFiles(this.siteId,this.path,this.mimetypes).then(function(e){l.files=e,l.filesLoaded=!0})},CoreSharedFilesListPage.prototype.closeModal=function(){this.viewCtrl.dismiss()},CoreSharedFilesListPage.prototype.refreshFiles=function(l){this.loadFiles().finally(function(){l.complete()})},CoreSharedFilesListPage.prototype.fileDeleted=function(l){this.files.splice(l,1)},CoreSharedFilesListPage.prototype.fileRenamed=function(l,e){this.files[l]=e.file},CoreSharedFilesListPage.prototype.openFolder=function(l){var e=this.textUtils.concatenatePaths(this.path,l.name);this.isModal?(this.path=e,this.filesLoaded=!1,this.loadFiles()):this.navCtrl.push("CoreSharedFilesListPage",{path:e,manage:this.manage,pick:this.pick,siteId:this.siteId,mimetypes:this.mimetypes,isModal:this.isModal})},CoreSharedFilesListPage.prototype.changeSite=function(l){this.siteId=l,this.path="",this.filesLoaded=!1,this.loadFiles()},CoreSharedFilesListPage.prototype.filePicked=function(l){this.viewCtrl.dismiss(l)},CoreSharedFilesListPage.prototype.ngOnDestroy=function(){this.shareObserver&&this.shareObserver.off()},CoreSharedFilesListPage=c([Object(t.m)({selector:"page-core-shared-files-list",templateUrl:"list.html"}),d("design:paramtypes",[i.G,i.t,_.a,s.a,r.b,a.c,o.b,u.b,i.s])],CoreSharedFilesListPage)}(),h=n(26),g=n(32),p=this&&this.__decorate||function(l,e,n,t){var i,a=arguments.length,u=a<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(l,e,n,t);else for(var o=l.length-1;o>=0;o--)(i=l[o])&&(u=(a<3?i(u):a>3?i(e,n,u):i(e,n))||u);return a>3&&u&&Object.defineProperty(e,n,u),u},m=function(){function CoreSharedFilesListPageModule(){}return CoreSharedFilesListPageModule=p([Object(t.I)({declarations:[f],imports:[h.a,g.a,i.l.forChild(f),a.b.forChild()]})],CoreSharedFilesListPageModule)}(),b=n(1527),C=n(1528),P=n(1529),S=n(1530),F=n(1531),v=n(1532),L=n(1533),k=n(1534),y=n(1535),V=n(1536),w=n(1537),I=n(1538),x=n(1539),R=n(374),M=n(8),j=n(250),O=n(214),D=n(47),$=n(44),U=n(25),E=n(18),A=n(48),H=n(110),N=n(31),T=n(21),q=n(19),G=n(27),J=n(33),K=n(68),z=n(126),B=n(111),Q=n(35),W=n(61),X=n(23),Y=n(7),Z=n(1588),ll=n(41),el=t._29({encapsulation:2,styles:[],data:{}}),nl=(t._27("core-site-picker",Z.a,function View_CoreSitePickerComponent_Host_0(l){return t._57(0,[(l()(),t._31(0,0,null,null,1,"core-site-picker",[],null,null,null,View_CoreSitePickerComponent_0,el)),t._30(1,114688,null,0,Z.a,[E.a,s.a,ll.a],null,null)],function(l,e){l(e,1,0)},null)},{initialSite:"initialSite"},{siteSelected:"siteSelected"},[]),n(746)),tl=n(384),il=n(67),al=n(2),ul=n(4),ol=n(24),sl=n(89),rl=n(15),_l=n(45),cl=n(34),dl=n(127),fl=n(118),hl=n(373),gl=n(40),pl=n(722),ml=n(20),bl=n(472),Cl=n(723),Pl=n(317),Sl=n(183),Fl=n(29),vl=n(109),Ll=n(161),kl=n(215),yl=n(175),Vl=n(56),wl=n(53),Il=n(70),xl=t._29({encapsulation:2,styles:[],data:{}}),Rl=t._27("page-core-shared-files-list",f,function View_CoreSharedFilesListPage_Host_0(l){return t._57(0,[(l()(),t._31(0,0,null,null,1,"page-core-shared-files-list",[],null,null,null,View_CoreSharedFilesListPage_0,xl)),t._30(1,245760,null,0,f,[gl.a,Il.a,_.a,s.a,r.b,E.a,o.b,u.b,ml.a],null,null)],function(l,e){l(e,1,0)},null)},{},{},[]),Ml=n(369),jl=n(370),Ol=n(372),Dl=n(371),$l=n(471),Ul=n(721),El=n(108),Al=n(272);n.d(e,"CoreSharedFilesListPageModuleNgFactory",function(){return Hl});var Hl=t._28(m,[],function(l){return t._40([t._41(512,t.o,t._21,[[8,[b.a,C.a,P.a,S.a,F.a,v.a,L.a,k.a,y.a,V.a,w.a,I.a,x.a,Rl]],[3,t.o],t.K]),t._41(4608,Y.m,Y.l,[t.G,[2,Y.w]]),t._41(4608,X.x,X.x,[]),t._41(4608,X.d,X.d,[]),t._41(4608,Ml.b,Ml.a,[]),t._41(4608,jl.a,jl.b,[]),t._41(4608,Ol.b,Ol.a,[]),t._41(4608,Dl.b,Dl.a,[]),t._41(4608,E.a,E.a,[$l.a,Ml.b,jl.a,Ol.b,Dl.b,E.b,E.c]),t._41(512,Y.b,Y.b,[]),t._41(512,X.v,X.v,[]),t._41(512,X.i,X.i,[]),t._41(512,X.s,X.s,[]),t._41(512,Ul.a,Ul.a,[]),t._41(512,a.b,a.b,[]),t._41(512,g.a,g.a,[]),t._41(512,El.a,El.a,[]),t._41(512,h.a,h.a,[]),t._41(512,Ul.b,Ul.b,[]),t._41(512,m,m,[]),t._41(256,E.c,void 0,[]),t._41(256,E.b,void 0,[]),t._41(256,Al.a,f,[])])})}});
=======
webpackJsonp([39],{

/***/ 2041:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoreLoginReconnectPageModule", function() { return CoreLoginReconnectPageModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ngx_translate_core__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__reconnect__ = __webpack_require__(2193);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_components_module__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__directives_directives_module__ = __webpack_require__(14);
// (C) Copyright 2015 Moodle Pty Ltd.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var CoreLoginReconnectPageModule = /** @class */ (function () {
    function CoreLoginReconnectPageModule() {
    }
    CoreLoginReconnectPageModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["I" /* NgModule */])({
            declarations: [
                __WEBPACK_IMPORTED_MODULE_3__reconnect__["a" /* CoreLoginReconnectPage */]
            ],
            imports: [
                __WEBPACK_IMPORTED_MODULE_4__components_components_module__["a" /* CoreComponentsModule */],
                __WEBPACK_IMPORTED_MODULE_5__directives_directives_module__["a" /* CoreDirectivesModule */],
                __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_3__reconnect__["a" /* CoreLoginReconnectPage */]),
                __WEBPACK_IMPORTED_MODULE_2__ngx_translate_core__["b" /* TranslateModule */].forChild()
            ]
        })
    ], CoreLoginReconnectPageModule);
    return CoreLoginReconnectPageModule;
}());

//# sourceMappingURL=reconnect.module.js.map

/***/ }),

/***/ 2193:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CoreLoginReconnectPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_app__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_events__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_sites__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_utils_dom__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_helper__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_forms__ = __webpack_require__(25);
// (C) Copyright 2015 Moodle Pty Ltd.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Page to enter the user password to reconnect to a site.
 */
var CoreLoginReconnectPage = /** @class */ (function () {
    function CoreLoginReconnectPage(navCtrl, navParams, fb, appProvider, sitesProvider, loginHelper, domUtils, eventsProvider) {
        this.navCtrl = navCtrl;
        this.appProvider = appProvider;
        this.sitesProvider = sitesProvider;
        this.loginHelper = loginHelper;
        this.domUtils = domUtils;
        this.eventsProvider = eventsProvider;
        this.showForgottenPassword = true;
        this.showSiteAvatar = false;
        this.isOAuth = false;
        var currentSite = this.sitesProvider.getCurrentSite();
        this.infoSiteUrl = navParams.get('infoSiteUrl');
        this.pageName = navParams.get('pageName');
        this.pageParams = navParams.get('pageParams');
        this.siteConfig = navParams.get('siteConfig');
        this.siteUrl = navParams.get('siteUrl');
        this.siteId = navParams.get('siteId');
        this.isLoggedOut = currentSite && currentSite.isLoggedOut();
        this.credForm = fb.group({
            password: ['', __WEBPACK_IMPORTED_MODULE_7__angular_forms__["h" /* Validators */].required]
        });
    }
    /**
     * View loaded.
     */
    CoreLoginReconnectPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        if (this.siteConfig) {
            this.getDataFromConfig(this.siteConfig);
        }
        this.sitesProvider.getSite(this.siteId).then(function (site) {
            _this.site = {
                id: site.id,
                fullname: site.infos.fullname,
                avatar: site.infos.userpictureurl
            };
            _this.username = site.infos.username;
            _this.siteUrl = site.infos.siteurl;
            _this.siteName = site.getSiteName();
            // If login was OAuth we should only reach this page if the OAuth method ID has changed.
            _this.isOAuth = site.isOAuth();
            // Show logo instead of avatar if it's a fixed site.
            _this.showSiteAvatar = _this.site.avatar && !_this.loginHelper.getFixedSites();
            return site.getPublicConfig().then(function (config) {
                return _this.sitesProvider.checkRequiredMinimumVersion(config).then(function () {
                    // Check logoURL if user avatar is not set.
                    if (_this.site.avatar.startsWith(site.infos.siteurl + '/theme/image.php')) {
                        _this.showSiteAvatar = false;
                        _this.logoUrl = _this.loginHelper.getLogoUrl(config);
                    }
                    _this.getDataFromConfig(_this.siteConfig);
                }).catch(function () {
                    _this.cancel();
                });
            }).catch(function () {
                // Ignore errors.
            });
        }).catch(function () {
            // Shouldn't happen. Just leave the view.
            _this.cancel();
        });
    };
    /**
     * Get some data (like identity providers) from the site config.
     *
     * @param config Config to use.
     */
    CoreLoginReconnectPage.prototype.getDataFromConfig = function (config) {
        var disabledFeatures = this.loginHelper.getDisabledFeatures(config);
        this.identityProviders = this.loginHelper.getValidIdentityProviders(config, disabledFeatures);
        this.showForgottenPassword = !this.loginHelper.isForgottenPasswordDisabled(config);
    };
    /**
     * Cancel reconnect.
     *
     * @param e Event.
     */
    CoreLoginReconnectPage.prototype.cancel = function (e) {
        if (e) {
            e.preventDefault();
            e.stopPropagation();
        }
        this.sitesProvider.logout();
    };
    /**
     * Tries to authenticate the user.
     *
     * @param e Event.
     */
    CoreLoginReconnectPage.prototype.login = function (e) {
        var _this = this;
        e.preventDefault();
        e.stopPropagation();
        this.appProvider.closeKeyboard();
        // Get input data.
        var siteUrl = this.siteUrl, username = this.username, password = this.credForm.value.password;
        if (!password) {
            this.domUtils.showErrorModal('core.login.passwordrequired', true);
            return;
        }
        if (!this.appProvider.isOnline()) {
            this.domUtils.showErrorModal('core.networkerrormsg', true);
            return;
        }
        var modal = this.domUtils.showModalLoading();
        // Start the authentication process.
        this.sitesProvider.getUserToken(siteUrl, username, password).then(function (data) {
            return _this.sitesProvider.updateSiteToken(_this.infoSiteUrl, username, data.token, data.privateToken).then(function () {
                _this.domUtils.triggerFormSubmittedEvent(_this.formElement, true);
                // Update site info too because functions might have changed (e.g. unisntall local_mobile).
                return _this.sitesProvider.updateSiteInfoByUrl(_this.infoSiteUrl, username).then(function () {
                    // Reset fields so the data is not in the view anymore.
                    _this.credForm.controls['password'].reset();
                    // Go to the site initial page.
                    return _this.loginHelper.goToSiteInitialPage(_this.navCtrl, _this.pageName, _this.pageParams);
                }).catch(function (error) {
                    if (error.loggedout) {
                        _this.loginHelper.treatUserTokenError(siteUrl, error, username, password);
                    }
                    else {
                        _this.domUtils.showErrorModalDefault(error, 'core.login.errorupdatesite', true);
                    }
                    // Error, go back to login page.
                    _this.cancel();
                });
            });
        }).catch(function (error) {
            _this.loginHelper.treatUserTokenError(siteUrl, error, username, password);
            if (error.loggedout) {
                _this.cancel();
            }
        }).finally(function () {
            modal.dismiss();
        });
    };
    /**
     * Forgotten password button clicked.
     */
    CoreLoginReconnectPage.prototype.forgottenPassword = function () {
        this.loginHelper.forgottenPasswordClicked(this.navCtrl, this.siteUrl, this.credForm.value.username, this.siteConfig);
    };
    /**
     * An OAuth button was clicked.
     *
     * @param provider The provider that was clicked.
     */
    CoreLoginReconnectPage.prototype.oauthClicked = function (provider) {
        if (!this.loginHelper.openBrowserForOAuthLogin(this.siteUrl, provider, this.siteConfig.launchurl)) {
            this.domUtils.showErrorModal('Invalid data.');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_9" /* ViewChild */])('reconnectForm'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], CoreLoginReconnectPage.prototype, "formElement", void 0);
    CoreLoginReconnectPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-core-login-reconnect',template:/*ion-inline-start:"/home/ravijain/Documents/GitHub/TriangleLearn-Ravi/src/core/login/pages/reconnect/reconnect.html"*/'<ion-header>\n    <ion-navbar core-back-button>\n        <ion-title>{{ \'core.login.reconnect\' | translate }}</ion-title>\n    </ion-navbar>\n</ion-header>\n<ion-content padding>\n    <div *ngIf="site" text-wrap text-center margin-bottom [ngClass]="{\'item-avatar-center\': showSiteAvatar}">\n        <ng-container *ngIf="showSiteAvatar">\n            <ion-avatar>\n                <!-- Show user avatar. -->\n                <img [src]="site.avatar" class="avatar" core-external-content [siteId]="site.id" alt="{{ \'core.pictureof\' | translate:{$a: site.fullname} }}" role="presentation" onError="this.src=\'assets/img/user-avatar.png\'">\n            </ion-avatar>\n        </ng-container>\n\n        <div class="core-login-site-logo" *ngIf="!showSiteAvatar">\n            <!-- Show site logo or a default image. -->\n            <img *ngIf="logoUrl" [src]="logoUrl" core-external-content [siteId]="siteId" role="presentation">\n            <img *ngIf="!logoUrl" src="assets/img/login_logo.png" role="presentation">\n        </div>\n\n        <h3 *ngIf="siteName" padding class="core-sitename"><core-format-text [text]="siteName" [filter]="false"></core-format-text></h3>\n        <p class="core-siteurl">{{siteUrl}}</p>\n\n        <p *ngIf="!isLoggedOut" class="core-login-reconnect-warning">\n            <ion-icon padding name="alert"></ion-icon> {{ \'core.login.reconnectdescription\' | translate }}\n        </p>\n    </div>\n    <form ion-list *ngIf="!isOAuth" [formGroup]="credForm" (ngSubmit)="login($event)" class="core-login-form" #reconnectForm>\n        <ion-item text-wrap class="core-username">\n            <p>{{username}}</p>\n        </ion-item>\n        <ion-item margin-bottom>\n            <core-show-password item-content [name]="\'password\'">\n                <ion-input class="core-ioninput-password" name="password" type="password" placeholder="{{ \'core.login.password\' | translate }}" formControlName="password" [clearOnEdit]="false"></ion-input>\n            </core-show-password>\n        </ion-item>\n        <ion-grid padding>\n            <ion-row>\n                <ion-col>\n                    <a ion-button block color="light" (click)="cancel($event)">{{ \'core.login.cancel\' | translate }}</a>\n                </ion-col>\n                <ion-col>\n                    <button ion-button block [disabled]="!credForm.valid">{{ \'core.login.loginbutton\' | translate }}</button>\n                </ion-col>\n            </ion-row>\n        </ion-grid>\n    </form>\n\n    <!-- Forgotten password button. -->\n    <ion-list no-lines *ngIf="showForgottenPassword && !isOAuth" class="core-login-forgotten-password">\n        <a ion-item text-center text-wrap (click)="forgottenPassword()" detail-none>\n            {{ \'core.login.forgotten\' | translate }}\n        </a>\n    </ion-list>\n\n    <!-- Identity providers. -->\n    <ion-list *ngIf="identityProviders && identityProviders.length" padding-top class="core-login-identity-providers">\n        <ion-item text-wrap><h3 class="item-heading">{{ \'core.login.potentialidps\' | translate }}</h3></ion-item>\n        <button ion-item *ngFor="let provider of identityProviders" text-wrap class="core-oauth-icon" (click)="oauthClicked(provider)" title="{{provider.name}}">\n            <img [src]="provider.iconurl" alt="" width="32" height="32" item-start>\n            {{provider.name}}\n        </button>\n    </ion-list>\n\n    <!-- If OAuth, display cancel button since the form isn\'t displayed. -->\n    <ion-list *ngIf="isOAuth">\n        <ion-item>\n            <a ion-button block color="light" (click)="cancel($event)">{{ \'core.login.cancel\' | translate }}</a>\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"/home/ravijain/Documents/GitHub/TriangleLearn-Ravi/src/core/login/pages/reconnect/reconnect.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* NavController */],
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* NavParams */],
            __WEBPACK_IMPORTED_MODULE_7__angular_forms__["a" /* FormBuilder */],
            __WEBPACK_IMPORTED_MODULE_2__providers_app__["b" /* CoreAppProvider */],
            __WEBPACK_IMPORTED_MODULE_4__providers_sites__["a" /* CoreSitesProvider */],
            __WEBPACK_IMPORTED_MODULE_6__providers_helper__["a" /* CoreLoginHelperProvider */],
            __WEBPACK_IMPORTED_MODULE_5__providers_utils_dom__["a" /* CoreDomUtilsProvider */],
            __WEBPACK_IMPORTED_MODULE_3__providers_events__["b" /* CoreEventsProvider */]])
    ], CoreLoginReconnectPage);
    return CoreLoginReconnectPage;
}());

//# sourceMappingURL=reconnect.js.map

/***/ })

});
//# sourceMappingURL=39.js.map
>>>>>>> Stashed changes
